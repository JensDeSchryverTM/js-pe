<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"
        defer></script>
    <title>JavaScript Formulier - Jens De Schryver</title>
</head>

<body>
    <main class="container">
        <h1>Registreer</h1>
        <p>Meld je aan bij Anoroc Services, wij beschermen jouw software tegen malware!</p>
        <div class="row">
            <div class="col-md-8">
                <form class="row">
                    <div class="col-md-6 mb-3">
                        <label for="voornaam" class="form-label">Voornaam</label>
                        <input type="text" class="form-control" id="voornaam" placeholder="Uw voornaam">
                    </div>
                    <div class="col-md-6 mb-3">
                        <label for="naam" class="form-label">Naam</label>
                        <input type="text" class="form-control" id="naam" placeholder="Uw naam">
                    </div>

                    <div class="col-md-6 mb-3">
                        <label for="gebruikersnaam" class="form-label">Gebruikersnaam</label>
                        <div class="input-group">
                            <span class="input-group-text">@</span>
                            <input type="text" class="form-control" id="gebruikersnaam" placeholder="r0909312"
                                aria-label="Username">
                        </div>
                    </div>
                    <div class="col-md-6 mb-3">
                        <label for="email" class="form-label">E-mailadres</label>
                        <input type="email" class="form-control" id="email" placeholder="mail@example.be">
                    </div>
                    <div class="col-md-6 mb-3">
                        <label for="wachtwoord" class="form-label">Wachtwoord</label>
                        <input type="password" class="form-control" id="wachtwoord"
                            aria-describedby="passwordHelpBlock">
                        <div id="passwordHelpBlock" class="form-text">Je wachtwoord moet minstens 8 tekens lang zijn
                        </div>
                    </div>
                    <div class="col-md-6 mb-3">
                        <label for="herhaalwachtwoord" class="form-label">Herhaal wachtwoord</label>
                        <input type="password" class="form-control" id="herhaalwachtwoord">
                    </div>

                    <div class="col-md-12 mb-3">
                        <label for="adres" class="form-label">Adres</label>
                        <input type="text" class="form-control" id="adres" placeholder="Uw adres en huisnummer">
                    </div>

                    <div class="col-md-5 mb-3">
                        <label for="land" class="form-label">Land</label>
                        <select class="form-select" id="land" aria-label="Default select example">
                            <option selected>Kies een land</option>
                            <option value="1">België</option>
                            <option value="2">Nederland</option>
                            <option value="3">Frankrijk</option>
                            <option value="4">Duitsland</option>
                            <option value="5">Luxemburg</option>
                            <option value="6">Verenigd Koninkrijk</option>
                            <option value="7">Spanje</option>
                            <option value="8">Italië</option>
                            <option value="9">Portugal</option>
                            <option value="10">Zwitserland</option>
                        </select>
                    </div>
                    <div class="col-md-4 mb-3">
                        <label for="provincie" class="form-label">Provincie</label>
                        <select class="form-select" id="provincie" aria-label="Default select example">
                            <option selected>Kies een provincie</option>
                            <option value="1">Antwerpen</option>
                            <option value="2">Vlaams-Brabant</option>
                            <option value="3">Waals-Brabant</option>
                            <option value="4">Henegouwen</option>
                            <option value="5">Luik</option>
                            <option value="6">Luxemburg</option>
                            <option value="7">Namen</option>
                            <option value="8">Oost-Vlaanderen</option>
                            <option value="9">West-Vlaanderen</option>
                            <option value="10">Limburg</option>
                        </select>
                    </div>
                    <div class="col-md-3 mb-3">
                        <label for="postcode" class="form-label">Postcode</label>
                        <input type="number" class="form-control" id="postcode" placeholder="Uw postcode">
                    </div>

                    <hr class="mt-3 mb-4">

                    <div class="col-md-7 mb-3">
                        <h3>Hou me op de hoogte</h3>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" value="" id="nieuwsbrief">
                            <label class="form-check-label" for="nieuwsbrief">Inschrijven voor onze nieuwsbrief</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" value="" id="voorwaarden">
                            <label class="form-check-label" for="voorwaarden">Ik ga akkoord met de algemene
                                voorwaarden.</label>
                        </div>
                    </div>
                    <div class="col-md-5 mb-3">
                        <h3>Betaling</h3>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="betaling" id="bankingapp"
                                value="Banking app">
                            <label class="form-check-label" for="bankingapp">Banking app</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="betaling" id="overschrijving"
                                value="Overschrijving">
                            <label class="form-check-label" for="overschrijving">Overschrijving</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="betaling" id="visa" value="Visa card">
                            <label class="form-check-label" for="visa">Visa card</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="betaling" id="paypal" value="PayPal">
                            <label class="form-check-label" for="paypal">PayPal</label>
                        </div>
                    </div>

                    <hr class="mt-3 mb-4">
                    <button type="button" class="btn btn-primary mb-4" id="verzenden">Wave your magic wand</button>
                </form>
            </div>
            <div class="col-md-4">
                <div id="result" class="" role="alert">
                    <!-- Hier komen de formulier meldingen -->
                    <h4 id="resulTitel" class="alert-heading"></h4>
                    <p id="resultMelding"></p>
                </div>
                <div id="betalingswijze" class="" role="alert">
                    <!-- Hier komt de betalingswijze -->
                    <h4 id="betalingswijzeTitel" class="alert-heading"></h4>
                    <p id="keuzeBetaling"></p>
                </div>
            </div>
        </div>
    </main>
    <script>
        let errors = []
        let melding = ""
        let resultDiv = document.querySelector("#result")
        let resultTitel = document.querySelector("#resulTitel")
        let resultMelding = document.querySelector("#resultMelding")
        let betalingswijzeDiv = document.querySelector("#betalingswijze")
        let betalingswijzeTitel = document.querySelector("#betalingswijzeTitel")
        let keuzeBetaling = document.querySelector("#keuzeBetaling")
        let verzenden = document.querySelector("#verzenden")

        verzenden.addEventListener("click", validateForm)

        function checkEmptyField(veld, melding) {
            if (veld == "") {
                errors.push(melding)
            }
        }

        function validateEmail(email) {
            // RegEx voor e-mailvalidatie
            // ^[\w]+: De gebruikersnaam moet minstens één karakter lang zijn en mag letters, nummers of underscores bevatten.
            // ([\.-]?[\w]+)*: Gevolgd door optionele combinaties van punten of koppeltekens, maar niet als eerste karakter, en letters, cijfers of underscores.
            // @: Het @-teken om de gebruikersnaam en het domein te scheiden.
            // [a-zA-Z\d]+: Het domein moet beginnen met een letter of een nummer.
            // ([-\.]?[a-zA-Z\d]+)*: Gevolgd door optionele combinaties van punten of koppeltekens en letters of cijfers.
            // (\.[a-zA-Z\d]+)+$: Het domein moet eindigen met een punt en minstens één letter of cijfer. De regex staat meerdere subdomeinen toe (bijvoorbeeld: example.co.uk).
            // https://regex101.com/
            // https://stackoverflow.com/questions/67375264/exceptional-regex-for-email-id-validation-in-javascript
            let emailRegEx = /^[a-zA-Z\d]+[\w.-]*@[a-zA-Z\d]+([-\.]?[a-zA-Z\d]+)*(\.[a-zA-Z\d]+)+$/
            return emailRegEx.test(email)
        }

        function validatePasswords(wachtwoord, herhaalWachtwoord) {

            checkEmptyField(wachtwoord, "Het veld wachtwoord is vereist.")
            checkEmptyField(herhaalWachtwoord, "Het veld herhaal wachtwoord is vereist.")

            if (wachtwoord !== "" && herhaalWachtwoord !== "") {
                if (wachtwoord.length <= 7) {
                    errors.push("Het wachtwoord moet langer zijn dan 7 karakters.")
                }
                if (wachtwoord !== herhaalWachtwoord) {
                    errors.push("Wachtwoorden komen niet overeen.")
                }
            }
        }

        function validatePayment(veld) {
            console.log(veld.length)
            let betalingsWijze = ""
            for (let i = 0; i < veld.length; i++) {
                console.log(veld[i].checked)
                console.log(veld[i].value)
                if (veld[i].checked) {
                    betalingsWijze = veld[i].value
                    break
                }
            }
            if (betalingsWijze === "") {
                errors.push("Geen betalingswijze geselecteerd.")
            } else if (errors.length === 0) {
                betalingswijzeDiv.classList.add("alert", "alert-info")
                betalingswijzeTitel.innerHTML = "Betalingswijze"
                keuzeBetaling.innerHTML = "Je betalingswijze is " + betalingsWijze
            }
        }

        function checkPC(veld) {
            let postcode = veld.value

            if (postcode === "") {
                errors.push("Het veld postcode is vereist.")
            } else if (postcode < 1000 || postcode > 9999) {
                errors.push("De waarde van postcode moet tussen 1000 en 9999 liggen.")
            }
        }

        function checkAlgemeneVoorwaarden(veld) {
            if (!veld.checked) {
                errors.push("Je moet de algemene voorwaarden accepteren.")
            }
        }

        function checkLandEnProvincie(landVeld, provincieVeld) {
            if (landVeld.selectedIndex === 0) {
                errors.push("Land is vereist.");
            }
            if (provincieVeld.selectedIndex === 0) {
                errors.push("Provincie is vereist.");
            }
        }

        function validateForm() {
            errors = [] // reset errors array
            // Controleer leeg veld voornaam
            checkEmptyField(document.querySelector("#voornaam").value, "Het veld voornaam is vereist.")
            // Controleer leeg veld achternaam
            checkEmptyField(document.querySelector("#naam").value, "Het veld naam is vereist.")
            // Controleer leeg veld gebruikersnaam
            checkEmptyField(document.querySelector("#gebruikersnaam").value, "het veld gebruikersnaam is vereist.")
            // Controleer leeg veld email
            checkEmptyField(document.querySelector("#email").value, "Het veld email is vereist.")
            // Valideer e-mailadres
            if (document.querySelector("#email").value !== "") {
                if (!validateEmail(document.querySelector("#email").value)) {
                    errors.push("E-mailadres is niet correct.")
                }
            }
            // Valideer wachtwoord
            validatePasswords(document.querySelector("#wachtwoord").value, document.querySelector("#herhaalwachtwoord").value)
            // Controleer leeg veld adres
            checkEmptyField(document.querySelector("#adres").value, "Het veld adres is vereist.")
            // Valideer land en provincie
            checkLandEnProvincie(document.querySelector("#land"), document.querySelector("#provincie"))
            // Valideer postcode
            checkPC(document.querySelector("#postcode"))
            // Valideer algemene voorwaarden
            checkAlgemeneVoorwaarden(document.querySelector("#voorwaarden"))
            // Valideer betalingswijze
            validatePayment(document.getElementsByName("betaling"))

            if (errors.length > 0) {
                // Er zijn fouten gevonden, toon deze aan de gebruiker in de div result:
                // https://developer.mozilla.org/en-US/docs/Web/API/Element/classList

                resultDiv.classList.add("alert", "alert-danger")
                resultTitel.innerHTML = "Yikes, errors.."
                resultMelding.innerHTML = errors.join("<br>")
            } else {
                // Er zijn geen fouten gevonden, Goed gedaan melding:
                resultDiv.classList.remove("alert", "alert-danger")
                resultDiv.classList.add("alert", "alert-success")
                resultTitel.innerHTML = "Goed gedaan!"
                resultMelding.innerHTML = "Aww yeah, je werd geregistreerd."
            }
        }

    </script>
</body>

</html>